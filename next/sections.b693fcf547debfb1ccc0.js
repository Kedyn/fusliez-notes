(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{170:function(e,t,a){"use strict";a.r(t);var r=a(47),n=a(12),o=a(30),l=a(44),i=a(0),c=a.n(i),s=a(16),d=a(19),m=a(32),b=a(168),u=a(45),p=a.n(u),g=a(14),y=a(15),h=Object(y.d)(e=>({ColorMenu:{background:e.backgroundColorPrimary,border:"1px solid "+e.borderColor,borderRadius:"0.25rem",boxShadow:"0 0 0.25rem black",bottom:"110%",display:"flex",flexWrap:"wrap",padding:"0.75rem",left:0,position:"absolute",width:"100%",zIndex:10},isHidden:{display:"none"}}));var f=function(e){const{isMenuShowing:t,setIsMenuShowing:a,currentColor:r}=e,l=c.a.useRef(null),i=h(),s=Object(o.c)(d.c),u=Object(o.c)(n.f),y=Object(o.b)(),f=[m.a.black.base,m.a.blue.base,m.a.brown.base,m.a.cyan.base,m.a.green.base,m.a.lime.base,m.a.orange.base,m.a.pink.base,m.a.purple.base,m.a.red.base,m.a.white.base,m.a.yellow.base];return c.a.useEffect(()=>{function e(e){var t;l.current&&!(null===(t=null==l?void 0:l.current)||void 0===t?void 0:t.contains(e.target))&&a(!1)}return document.addEventListener("click",e,!0),document.addEventListener("drag",e,!0),()=>{document.removeEventListener("click",e,!0),document.removeEventListener("drag",e,!0)}},[l]),c.a.createElement("div",{ref:l,className:p()(i.ColorMenu,{[i.isHidden]:!t})},c.a.createElement(b.a,{colors:f,color:m.a[r].base,onChange:e=>{return((e,t)=>{if(e!==t){const a=Object(g.c)(e=>Object.assign(Object.assign({},s[e]),{position:Object.assign({},s[e].position)})),r=a[e].name,o=a[e].section;a[e].name=a[t].name,a[e].section=a[t].section,a[t].name=r,a[t].section=o;const l=[...u.map(a=>({id:a.id,title:a.title,players:[...a.players.map(a=>a.id===e?{id:t}:a.id===t?{id:e}:{id:a.id})]}))];y(Object(d.j)(a)),y(Object(n.p)(l))}a(!1)})(r,(t=e.hex,["black","blue","brown","cyan","green","lime","orange","pink","purple","red","white","yellow"][f.indexOf(t.toUpperCase())]));var t}}))},v=a(26),j=a(37),O=a(21),w=Object(y.d)(e=>({Player:e=>({display:"flex",flexDirection:"column",alignItems:"stretch",flex:e.showNames||e.isColorBlind?"1 0 50%":"0 0 2.5rem",maxWidth:e.showNames||e.isColorBlind?"50%":"none"}),PlayerTile:t=>({alignItems:"center",backgroundColor:t.name||!t.showNames?`rgb(${Object(j.b)(t.color,"dark")})`:e.backgroundColorSecondary,border:"1px solid",borderColor:t.name||!t.showNames?`rgb(${Object(j.b)(t.color,"base")})`:e.borderColor,borderRadius:"0.25rem",boxShadow:"1px 1px 1px rgba(0,0,0,0.25)",display:"flex",justifyContent:"center",margin:"0.375rem",position:"relative",transition:"border-color 0.2s ease","&:hover":{borderColor:`rgba(${Object(j.c)(e.textColorSecondary)}, 0.25)`,cursor:t.isLocked?"grab":"pointer"}}),PlayerIconWrapper:e=>({display:"flex",flex:e.showNames||!e.isColorBlind?"0 0 2.25rem":"1 0 auto",alignSelf:"stretch",width:e.showNames||!e.isColorBlind?"2.25rem":"auto",height:"2rem",justifyContent:"center",alignItems:"center",backgroundColor:e.name||!e.showNames?`rgb(${Object(j.b)(e.color,"base")})`:"transparent","&:hover":{cursor:e.isLocked?"grab":e.showNames?"pointer":"grab"}}),PlayerIcon:e=>({width:"2.25rem",height:"2rem",backgroundImage:"url(assets/images/players.png)",backgroundRepeat:"no-repeat",backgroundSize:"1200% 240%",backgroundPosition:`-${O.b[e.color].alive.x/148*2.25}rem 0px`}),PlayerName:t=>({flexGrow:1,flexBasis:"0",maxWidth:"100%",paddingLeft:"0.5rem",fontSize:"1.15rem",fontWeight:600,lineHeight:1.25,letterSpacing:"0.05rem",color:""!==t.name?Object(j.a)(Object(j.b)(t.color,"dark"),e):e.textColorPrimary,opacity:t.isLocked&&""===t.name?.5:1}),PlayerInput:t=>({color:Object(j.a)(Object(j.b)(t.color,"dark"),e),display:"block",fontSize:t.isMobile?"1rem":t.showNames?"1.15rem":"1rem",fontFamily:e.fontFamily,fontWeight:600,letterSpacing:"0.05rem",lineHeight:1.25,padding:"0.25rem 0",textAlign:"left",width:"100%","&::placeholder":{color:e.textColorPrimary,opacity:.5}}),PlayerHelpText:{textAlign:"center",fontSize:"0.75rem",overflowX:"hidden",letterSpacing:"0.05em",fontWeight:500,opacity:.7}})),x=a(99);var C=function(e){const{playerId:t}=e,{name:a,color:n}=Object(o.c)(Object(d.b)(t)),l=Object(o.c)(v.b),i=Object(o.c)(s.c),m=Object(o.c)(s.b),b=Object(o.c)(r.b),u=Object(o.b)(),[g,y]=c.a.useState(!1),h=c.a.useRef(null),j=w({isMobile:l,showNames:i,isColorBlind:m,isLocked:b,color:n,name:a}),{t:O}=Object(x.a)();return c.a.createElement("div",{className:j.Player,id:n,title:n},c.a.createElement("div",{className:j.PlayerTile+" player-handle"},g&&!l&&!b&&c.a.createElement(f,{isMenuShowing:g,setIsMenuShowing:y,currentColor:n}),c.a.createElement("div",{className:p()(j.PlayerIconWrapper,"player-handle"),onClick:()=>{b||i&&!l&&y(!g)}},c.a.createElement("div",{className:j.PlayerIcon})),i&&c.a.createElement("div",{className:j.PlayerName},!b&&c.a.createElement("input",{type:"text",placeholder:O("main."+n),className:j.PlayerInput,maxLength:10,onChange:e=>(e=>{u(Object(d.g)({player:t,newName:e.currentTarget.value}))})(e),onKeyPress:e=>{var t,a,r,n,o,l,i,c,s,d;if("Enter"===e.key){const e=h.current,m=null!==(n=null===(r=null===(a=null===(t=e.parentElement)||void 0===t?void 0:t.parentElement)||void 0===a?void 0:a.parentElement)||void 0===r?void 0:r.nextElementSibling)&&void 0!==n?n:null===(c=null===(i=null===(l=null===(o=e.parentElement)||void 0===o?void 0:o.parentElement)||void 0===l?void 0:l.parentElement)||void 0===i?void 0:i.parentElement)||void 0===c?void 0:c.firstElementChild,b=null===(d=null===(s=null==m?void 0:m.lastChild)||void 0===s?void 0:s.lastChild)||void 0===d?void 0:d.firstChild;null==b||b.select()}},value:a,ref:h}),b&&c.a.createElement(c.a.Fragment,null,""!==a?a:O("main."+n)))),m&&c.a.createElement("div",{className:j.PlayerHelpText},O("main."+n)))},E=a(141),S=Object(y.d)(e=>({Section:{},SectionTitle:{fontSize:"1rem",letterSpacing:"0.05rem",fontWeight:600},SectionArea:{display:"flex",flexWrap:"wrap",minHeight:"2rem",justifyContent:"flex-start",padding:"0.5rem",backgroundColor:e.backgroundColorSecondary,borderRadius:"0.25rem"}}));var k=function(e){const t=Object(o.c)(s.c),a=Object(o.c)(v.b),[r,l]=c.a.useState(!1),i=S({showNames:t}),{data:m}=e,{t:b}=Object(x.a)(),u=Object(o.b)();return c.a.useEffect(()=>{a||(r?document.querySelector("body").classList.add("dragging"):document.querySelector("body").classList.remove("dragging"))},[r]),c.a.createElement("div",{className:i.Section},c.a.createElement("h2",{className:i.SectionTitle},b(m.title)),c.a.createElement(E.ReactSortable,{id:"Section"+m.id,group:"players",handle:".player-handle",delayOnTouchOnly:a,filter:a?"input":"",preventOnFilter:!1,delay:a?10:0,touchStartThreshold:3,list:m.players,setList:e=>{u(Object(n.n)({section:m.id,newPlayers:e}))},className:i.SectionArea,forceFallback:!0,onChoose:()=>l(!0),onUnchoose:()=>l(!1),onEnd:e=>{u(Object(d.h)({player:e.item.id,newSection:parseInt(e.to.id.substr(7))}))}},m.players.map(({id:e})=>c.a.createElement(C,{key:e,playerId:e}))))},N=Object(y.d)({Sections:e=>({padding:e.isMobile?"1rem":0}),SectionsControls:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",padding:"0.5rem 0","& button":{margin:"0.25rem",flex:"1 1 auto",maxWidth:"100%"}}});t.default=function(){const e=Object(o.c)(s.c),t=Object(o.c)(r.b),a=Object(o.c)(v.b),i=Object(o.c)(n.f),m=Object(o.c)(n.e),b=Object(o.b)(),{t:u}=Object(x.a)(),p=N({isMobile:a});return c.a.createElement("div",{className:p.Sections},i.map(e=>c.a.createElement(k,{key:e.id,data:e})),c.a.createElement("div",{className:p.SectionsControls},e&&c.a.createElement(l.b,{onClick:()=>b(Object(r.c)())},u(t?"controls.unlockEditing":"controls.lockEditing")),a&&c.a.createElement(l.b,{onClick:()=>{b(Object(n.i)()),b(Object(d.i)(m))}},u("controls.resetSections"))))}}}]);