(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{111:function(t,e,s){"use strict";var i=s(0),n=s.n(i),o=s(15),a=Object(o.d)({ButtonGroup:t=>({display:t.inline?"inline-flex":"flex",flexWrap:"wrap",margin:"0 0.25rem","&>*":{flex:"1 1 auto","&:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}}})});e.a=function(t){const{children:e,inline:s}=t,i=a({inline:s});return n.a.createElement("div",{className:i.ButtonGroup},e)}},169:function(t,e,s){"use strict";var i;s.r(e),function(t){t[t.LEFT=0]="LEFT",t[t.MIDDLE=1]="MIDDLE",t[t.RIGHT=2]="RIGHT"}(i||(i={}));class n{constructor(...t){2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]?this.set(t[0],t[1]):1===t.length&&t[0]instanceof n?this.set(t[0]):this.set(0,0)}set(...t){let e=0,s=0;1===t.length?t[0]instanceof n&&(e=t[0].x,s=t[0].y):2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&(e=t[0],s=t[1]),this.x=e,this.y=s}scale(t){return this.x*=t,this.y*=t,this}add(t){return this.x+=t.x,this.y+=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}getDistance(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}getCenter(t){return new n((this.x+t.x)/2,this.y/t.y/2)}static scale(t,e){const s=new n(t);return s.scale(e),s}static add(t,e){const s=new n(t);return s.add(e),s}static subtract(t,e){const s=new n(t);return s.subtract(e),s}}class o{constructor(){this.mousePosition=new n,this.mouseButtons={LEFT:!1,MIDDLE:!1,RIGHT:!1},this.keys={},this.wheel=0,this.doubleClicked=!1,this.propagate=!0}static GetInstance(){return o.instance||(o.instance=new o),o.instance}getMousePosition(){return this.mousePosition}getMouseButtons(){return this.propagate?this.mouseButtons:{LEFT:!1,MIDDLE:!1,RIGHT:!1}}getKeys(){return this.keys}getWheel(){return this.wheel}getDoubleClicked(){return this.doubleClicked}stopPropagation(){this.propagate=!1}restoreState(){this.wheel=0,this.doubleClicked=!1,this.propagate=!0}onPointerMove(t){t.preventDefault();const e=t.currentTarget.getBoundingClientRect();this.mousePosition.set((t.clientX-e.left)*(t.currentTarget.width/e.width),(t.clientY-e.top)*(t.currentTarget.height/e.height))}onPointerDown(t){switch(t.preventDefault(),t.button){case i.LEFT:this.mouseButtons.LEFT=!0;break;case i.MIDDLE:this.mouseButtons.MIDDLE=!0;break;case i.RIGHT:this.mouseButtons.RIGHT=!0}}onPointerUp(t){switch(t.preventDefault(),t.button){case i.LEFT:this.mouseButtons.LEFT=!1;break;case i.MIDDLE:this.mouseButtons.MIDDLE=!1;break;case i.RIGHT:this.mouseButtons.RIGHT=!1}}onPointerEnter(t){t.preventDefault()}onPointerLeave(t){t.preventDefault(),this.mousePosition.set(-1,-1),this.mouseButtons={LEFT:!1,MIDDLE:!1,RIGHT:!1}}onDoubleClick(t){t.preventDefault(),this.doubleClicked=!0}onWheel(t){t.preventDefault(),this.wheel=t.deltaY}onKeyDown(t){t.preventDefault(),this.keys[t.key]=!0}onKeyUp(t){t.preventDefault(),this.keys[t.key]=!1}}var a=o.GetInstance();class h extends class{constructor(t){this.position=new n(t)}setPosition(...t){2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]?this.position.set(t[0],t[1]):1===t.length&&t[0]instanceof n&&this.position.set(t[0])}getPosition(){return this.position}getX(){return this.position.x}getY(){return this.position.y}}{constructor(t,e,s){super(t),this.width=e,this.height=s}setDimensions(t,e){this.width=t,this.height=e}setWidth(t){this.width=t}setHeight(t){this.height=t}getWidth(){return this.width}getHeight(){return this.height}isPointInside(t){return t.x>=this.position.x&&t.x<=this.position.x+this.width&&t.y>=this.position.y&&t.y<=this.position.y+this.height}}class r extends class{constructor(t=!1){this.debug=t}setDebug(t){this.debug=t}setContext(t){this.context=t}}{constructor(t,e,s,i){super(),this.image=t,this.srcRect=void 0!==e?e:new h(new n,this.image.width,this.image.height),this.dstRect=void 0!==s?s:new h(new n,this.image.width,this.image.height),this.scale=void 0!==i?i:new n(1,1)}setRects(t,e){this.srcRect=void 0!==t?t:new h(new n,this.image.width,this.image.height),this.dstRect=void 0!==e?e:new h(new n,this.image.width,this.image.height)}setSourceRect(t){this.srcRect=void 0!==t?t:new h(new n,this.image.width,this.image.height)}setDestinationRect(t){this.dstRect=void 0!==t?t:new h(new n,this.image.width,this.image.height)}update(){}render(){this.context.save(),this.context.scale(this.scale.x,this.scale.y),this.context.drawImage(this.image,this.srcRect.getX(),this.srcRect.getY(),this.srcRect.getWidth(),this.srcRect.getHeight(),this.dstRect.getX(),this.dstRect.getY(),this.dstRect.getWidth(),this.dstRect.getHeight()),this.context.restore(),this.debug&&(this.context.save(),this.context.strokeStyle="red",this.context.strokeRect(this.dstRect.getX(),this.dstRect.getY(),this.dstRect.getWidth(),this.dstRect.getHeight()),this.context.restore())}}class c extends class{constructor(t=!1){this.canvasObjects=[],this.debug=t}setDebug(t){this.debug=t;for(const e of this.canvasObjects)e.setDebug(t)}setContext(t){this.context=t;for(const e of this.canvasObjects)e.setContext(t)}update(t){for(let e=this.canvasObjects.length-1;e>=0;e--)this.canvasObjects[e].update(t)}render(){for(const t of this.canvasObjects)t.render()}}{constructor(t,e,s,i,o=!1){super(o),this.name=t,this.image=e,this.playersImage=s,this.scale=i,this.canvasObjects.push(new r(e,void 0,void 0,new n(i,i)))}getName(){return this.name}getImage(){return this.image}getScale(){return this.scale}}new n(1150,6689),new n(3690,475),new n(3927,574);var l=s(74);class u extends c{constructor(t,e,s=!1){super("MiraHQ",t,e,2,s),console.log(l.a.t("maps.greenhouse"))}}class g extends c{constructor(t,e){super("Polus",t,e,4)}}class d extends c{constructor(t,e){super("TheSkeld",t,e,1)}}class p{constructor(){const t=new Image,e=new Image,s=new Image,i=new Image;t.src="assets/images/MiraHQ.png",e.src="assets/images/Polus.png",s.src="assets/images/TheSkeld.png",i.src="assets/images/players.png";const o=()=>{this.loading+=.25};t.onload=o,e.onload=o,s.onload=o,i.onload=o,this.debug=!1,this.layers=[],this.animFrame=0,this.miraHQ=new u(t,i),this.polus=new g(e,i),this.theSkeld=new d(s,i),this.loading=0,this.offset=new n,this.scale=new n(1,1),this.panning=!1,this.panningPosition=new n,this.layers.push(this.miraHQ),l.a.on("languageChanged",()=>{console.log("Update maps default texts")})}static GetInstance(){return p.instance||(p.instance=new p),p.instance}setDebug(t){this.debug=t;for(const e of this.layers)e.setDebug(t)}setContext(t){this.context=t,this.miraHQ.setContext(t),this.polus.setContext(t),this.theSkeld.setContext(t);for(const e of this.layers)e.setContext(t)}setTheme(t){this.theme=t}setCurrentMap(t){if(t!==this.layers[0].getName()){switch(t){case"Polus":this.layers[0]=this.polus;break;case"TheSkeld":this.layers[0]=this.theSkeld;break;default:this.layers[0]=this.miraHQ}const e=this.layers[0];this.offset.set(0,0),this.scale.x=this.context.canvas.width/(e.getImage().width*e.getScale()),this.scale.y=this.context.canvas.height/(e.getImage().height*e.getScale())}}updatePlayers(){}getAnimFrame(){return this.animFrame}getCurrentMap(){return this.layers[0].getName()}init(){if(void 0===this.context&&null===this.context||void 0===this.theme&&null===this.theme)throw new Error("Context and theme must be set before initializing the animation.");{const t=this.layers[0];this.context.fillStyle=this.theme.textColorPrimary,this.context.font="50px "+this.theme.fontFamily,this.offset.set(0,0),this.scale.x=this.context.canvas.width/(t.getImage().width*t.getScale()),this.scale.y=this.context.canvas.height/(t.getImage().height*t.getScale()),this.loop(0)}}screenToWorld(t){const e=n.add(t,this.offset);return e.x/=this.scale.x,e.y/=this.scale.y,e}update(t){const e=a.getMousePosition();this.panning&&a.getMouseButtons().LEFT&&(this.offset.subtract(n.subtract(e,this.panningPosition)),this.panningPosition.set(e),a.stopPropagation());for(let e=this.layers.length-1;e>=0;e--)this.layers[e].update(t);a.getMouseButtons().LEFT?(this.panning=!0,this.panningPosition.set(e)):this.panning=!1;const s=a.getWheel();if(s){const t=this.screenToWorld(e);s>0?(this.scale.x*=.9,this.scale.y*=.9):s<0&&(this.scale.x*=1.1,this.scale.y*=1.1);const i=this.screenToWorld(e);t.subtract(i),t.x*=this.scale.x,t.y*=this.scale.y,this.offset.add(t)}a.restoreState()}render(){const t=this.context.canvas.width,e=this.context.canvas.height;if(this.context.clearRect(0,0,t,e),this.loading<1)this.context.fillText("Loading...",t/2-50,e/2-10);else{this.context.save(),this.context.translate(-this.offset.x,-this.offset.y),this.context.scale(this.scale.x,this.scale.y);for(const t of this.layers)t.render();this.context.restore()}}loop(t){m.update(t),m.render(),m.animFrame=window.requestAnimationFrame(m.loop)}}const m=p.GetInstance();var f=m,x=s(44),w=s(111),y=s(12),b=s(0),v=s.n(b),D=s(19),M=s(30),R=s(15),T=Object(R.d)(t=>({Map:{width:"100%",height:"100%",maxHeight:"calc((var(--vh, 1vh) * 100) - 9rem)",fallbacks:{maxHeight:"calc(100vh - 9rem)"},overscrollBehavior:"none",touchAction:"none"},MapImage:{display:"none"}}));var E=function(t){const e=T(),s=Object(R.f)(),i=t.currentMap,n=Object(M.c)(D.c),o=Object(M.c)(y.e),h=Object(M.c)(y.d),r=Object(M.c)(y.h),c=v.a.useRef(null);return v.a.useEffect(()=>{if(null!==c.current){const t=c.current.getContext("2d");if(null!=t)return f.setDebug(!0),f.setContext(t),f.setTheme(s),f.init(),()=>{cancelAnimationFrame(f.getAnimFrame())}}},[]),v.a.useEffect(()=>{f.setTheme(s)},[s]),v.a.useEffect(()=>{f.setCurrentMap(i)},[i]),v.a.useEffect(()=>{f.updatePlayers()},[n,o,h,r]),v.a.createElement("canvas",{ref:c,width:1920,height:1080,className:e.Map,onContextMenu:t=>t.preventDefault(),onPointerMove:t=>a.onPointerMove(t),onPointerDown:t=>a.onPointerDown(t),onPointerUp:t=>a.onPointerUp(t),onPointerEnter:t=>a.onPointerEnter(t),onPointerLeave:t=>a.onPointerLeave(t),onDoubleClick:t=>a.onDoubleClick(t),onWheel:t=>a.onWheel(t),onKeyDown:t=>a.onKeyDown(t),onKeyUp:t=>a.onKeyUp(t)},"This section is not supported on your browser.")},P=s(26),k=Object(R.d)({Maps:{display:"flex",flexDirection:"column",justifyContent:"center",padding:"1rem",flexGrow:1},MapsHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},MapsTitle:{fontSize:"1.25rem",fontWeight:500,letterSpacing:"0.05em",marginRight:"1rem",flex:"1 0 auto"},MapsContainer:{flexGrow:1}}),I=s(99);e.default=function(){const t=Object(M.c)(P.b),[e,s]=v.a.useState(f.getCurrentMap()),i=k(),{t:n}=Object(I.a)();return v.a.createElement("div",{className:i.Maps},v.a.createElement("div",{className:i.MapsHeader},!t&&v.a.createElement("h2",{className:i.MapsTitle},n("maps.title")),v.a.createElement(w.a,{inline:!t},v.a.createElement(x.b,{pressed:"MiraHQ"===e,onClick:()=>s("MiraHQ")},"Mira HQ"),v.a.createElement(x.b,{pressed:"Polus"===e,onClick:()=>s("Polus")},"Polus"),v.a.createElement(x.b,{pressed:"TheSkeld"===e,onClick:()=>s("TheSkeld")},"The Skeld"))),v.a.createElement("div",{className:i.MapsContainer},v.a.createElement(E,{currentMap:e})))}}}]);