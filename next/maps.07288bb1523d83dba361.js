(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{288:function(e,t,s){"use strict";s.r(t);var i,n=s(12),a=s(22);class o{constructor(...e){2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]?this.set(e[0],e[1]):1===e.length&&e[0]instanceof o?this.set(e[0]):this.set(0,0)}set(...e){let t=0,s=0;1===e.length?e[0]instanceof o&&(t=e[0].x,s=e[0].y):2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&(t=e[0],s=e[1]),this.x=t,this.y=s}scale(e){return this.x*=e,this.y*=e,this}add(e){return this.x+=e.x,this.y+=e.y,this}subtract(e){return this.x-=e.x,this.y-=e.y,this}getDistance(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}getCenter(e){return new o((this.x+e.x)/2,this.y/e.y/2)}static scale(e,t){const s=new o(e);return s.scale(t),s}static add(e,t){const s=new o(e);return s.add(t),s}static subtract(e,t){const s=new o(e);return s.subtract(t),s}}class h extends class{constructor(e){this.position=new o(e)}setPosition(...e){2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]?this.position.set(e[0],e[1]):1===e.length&&e[0]instanceof o&&this.position.set(e[0])}getPosition(){return this.position}getX(){return this.position.x}getY(){return this.position.y}}{constructor(e,t,s){super(e),this.width=t,this.height=s}setDimensions(e,t){this.width=e,this.height=t}setWidth(e){this.width=e}setHeight(e){this.height=e}getWidth(){return this.width}getHeight(){return this.height}isPointInside(e){return e.x>=this.position.x&&e.x<=this.position.x+this.width&&e.y>=this.position.y&&e.y<=this.position.y+this.height}}!function(e){e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT"}(i||(i={}));class r{constructor(){this.mousePosition=new o,this.mouseButtons={LEFT:!1,MIDDLE:!1,RIGHT:!1},this.keys={},this.wheel=0,this.doubleClicked=!1,this.propagate=!0}static GetInstance(){return r.instance||(r.instance=new r),r.instance}getMousePosition(){return this.mousePosition}getMouseButtons(){return this.propagate?this.mouseButtons:{LEFT:!1,MIDDLE:!1,RIGHT:!1}}getKeys(){return this.keys}getWheel(){return this.wheel}getDoubleClicked(){return this.doubleClicked}stopPropagation(){this.propagate=!1}restoreState(){this.wheel=0,this.doubleClicked=!1,this.propagate=!0}onPointerMove(e){e.preventDefault();const t=e.currentTarget.getBoundingClientRect();this.mousePosition.set((e.clientX-t.left)*(e.currentTarget.width/t.width),(e.clientY-t.top)*(e.currentTarget.height/t.height))}onPointerDown(e){switch(e.preventDefault(),e.currentTarget.focus(),e.button){case i.LEFT:this.mouseButtons.LEFT=!0;break;case i.MIDDLE:this.mouseButtons.MIDDLE=!0;break;case i.RIGHT:this.mouseButtons.RIGHT=!0}}onPointerUp(e){switch(e.preventDefault(),e.button){case i.LEFT:this.mouseButtons.LEFT=!1;break;case i.MIDDLE:this.mouseButtons.MIDDLE=!1;break;case i.RIGHT:this.mouseButtons.RIGHT=!1}}onPointerEnter(e){e.preventDefault()}onPointerLeave(e){e.preventDefault(),this.mousePosition.set(-1,-1),this.mouseButtons={LEFT:!1,MIDDLE:!1,RIGHT:!1}}onDoubleClick(e){e.preventDefault(),this.doubleClicked=!0}onWheel(e){e.preventDefault(),this.wheel=e.deltaY}onKeyDown(e){e.preventDefault(),this.keys[e.key]=!0}onKeyUp(e){e.preventDefault(),this.keys[e.key]=!1}}var c=r.GetInstance();class l{constructor(e=!0,t=!1){this.visible=e,this.draggable=t,this.active=!1}setVisible(e){this.visible=e}setDraggable(e){this.draggable=e}getVisible(){return this.visible}getDraggable(){return this.draggable}update(e){const t=p.screenToWorld(c.getMousePosition()),s=c.getMouseButtons().LEFT;if(this.active)if(s){const e=this.getRect();this.setPosition(new o(t.x-e.getWidth()/2,t.y-e.getHeight()/2)),c.stopPropagation()}else this.active=!1;this.visible&&this.draggable&&s&&this.getRect().isPointInside(t)&&(this.active=!0,c.stopPropagation())}}class g extends l{constructor(e,t,s,i,n,a){var r,c;super(n,a);const l=p.getImages().get(e);this.image=void 0!==l?l:new Image,this.srcRect=void 0!==t?t:new h(new o,this.image.width,this.image.height),this.dstRect=void 0!==s?s:new h(new o,null!==(r=this.image.width)&&void 0!==r?r:1920,null!==(c=this.image.height)&&void 0!==c?c:1080),this.scale=void 0!==i?i:new o(1,1),this.dstRect.setWidth(this.dstRect.getWidth()*this.scale.x),this.dstRect.setHeight(this.dstRect.getHeight()*this.scale.y)}setRects(e,t){this.srcRect=void 0!==e?e:new h(new o,this.image.width,this.image.height),this.dstRect=void 0!==t?t:new h(new o,this.image.width,this.image.height)}setSourceRect(e){this.srcRect=void 0!==e?e:new h(new o,this.image.width,this.image.height)}setDestinationRect(e){this.dstRect=void 0!==e?e:new h(new o,this.image.width,this.image.height),this.dstRect.setWidth(this.dstRect.getWidth()*this.scale.x),this.dstRect.setHeight(this.dstRect.getHeight()*this.scale.y)}setPosition(e){this.dstRect.setPosition(e.x,e.y)}setScale(e){const t=this.dstRect.getWidth(),s=this.dstRect.getHeight();this.dstRect.setDimensions(t/this.scale.x*e.x,s/this.scale.y*e.y),this.scale=e}getSourceRect(){return this.srcRect}getRect(){return this.dstRect}getPosition(){return this.dstRect.getPosition()}render(){if(this.visible){const e=p.getContext();e.save(),e.drawImage(this.image,this.srcRect.getX(),this.srcRect.getY(),this.srcRect.getWidth(),this.srcRect.getHeight(),this.dstRect.getX(),this.dstRect.getY(),this.dstRect.getWidth(),this.dstRect.getHeight()),p.getDebug()&&(e.save(),e.strokeStyle="red",e.lineWidth=10,e.strokeRect(this.dstRect.getX(),this.dstRect.getY(),this.dstRect.getWidth(),this.dstRect.getHeight()),e.restore()),e.restore()}}}class u{constructor(){this.debug=!1,this.images=new Map,this.loaded=0,this.offset=new o,this.scale=new o(1,1),this.players=new Map}static GetInstance(){return u.instance||(u.instance=new u),u.instance}setDebug(e){this.debug=e}setContext(e){this.context=e}setTheme(e){this.theme=e}setImages(e){for(let t=0;t<e.length;t+=2){const s=new Image;this.images.set(e[t],s),s.src=e[t+1],s.onload=()=>{this.loaded++}}}setOffset(e,t){this.offset.set(e,t)}setScale(e,t){this.scale.set(e,t)}getDebug(){return this.debug}getContext(){return this.context}getImages(){return this.images}getTheme(){return this.theme}getOffset(){return this.offset}getScale(){return this.scale}getPlayers(){return this.players}isLoaded(){return this.loaded===this.images.size}screenToWorld(e){const t=o.add(e,this.offset);return t.x/=this.scale.x,t.y/=this.scale.y,t}updatePlayers(e,t,s,i){for(const n of Object.keys(e)){const r=e[n];let c=a.b[n].alive,l=!0,u=!0;r.section===t?c=a.b[n].dead:r.section===s&&(l=!1,u=!1);const p=new h(new o(c.x,c.y),c.w,c.h),w=this.players.get(n);void 0!==w?(w.getRect().setDimensions(p.getWidth()*i,p.getHeight()*i),w.setSourceRect(p),w.setVisible(l),w.setDraggable(u)):this.players.set(n,new g("Players",p,new h(new o(p.getPosition()),p.getWidth(),p.getHeight()),new o(i,i),l,u))}}}var p=u.GetInstance();class w{constructor(e=!0){this.entities=[],this.visible=e}setVisible(e){this.visible=e}getVisible(){return this.visible}update(e){for(let t=this.entities.length-1;t>=0;t--)this.entities[t].update(e)}render(){if(this.visible)for(const e of this.entities)e.render()}}const d={x:0,y:0,w:208,h:45},m={x:612,y:0,w:144,h:45},x={x:416,y:0,w:196,h:42},y={x:208,y:0,w:208,h:45},f=757,b=0,v=45,P=45,R="rgba(0, 0, 0, 0.8)",M="rgba(255, 255, 255, 0.8)";class S{constructor(){this.layers=[]}update(e){for(let t=this.layers.length-1;t>=0;t--)this.layers[t].update(e)}render(){const e=p.getContext(),t=e.canvas.width,s=e.canvas.height;e.clearRect(0,0,t,s);const i=p.getOffset(),n=p.getScale();e.save(),e.translate(-i.x,-i.y),e.scale(n.x,n.y);for(const e of this.layers)e.render();e.restore()}}var T=s(76);class I{constructor(){this.scenes=new Map,this.currentScene="",T.a.on("languageChanged",()=>{this.scenes.forEach(e=>e.updateText())})}static GetInstance(){return I.instance||(I.instance=new I),I.instance}addScene(e,t){this.scenes.set(e,t)}delScene(e){this.scenes.delete(e)}changeScene(e){var t,s;if(!this.scenes.has(e))throw new Error(e+" no such a scene.");""!==this.currentScene&&(null===(t=this.scenes.get(this.currentScene))||void 0===t||t.onExit()),null===(s=this.scenes.get(e))||void 0===s||s.onEnter(),this.currentScene=e}getCurrentScene(){return this.currentScene}update(e){const t=this.scenes.get(this.currentScene);void 0!==t&&t.update(e)}render(){const e=this.scenes.get(this.currentScene);void 0!==e&&e.render()}}var k=I.GetInstance();class D extends l{constructor(e,t,s=!0,i=20,n="black",a="white",r=8,c,l){super(c,l),this.text=e,this.position=t,this.center=s,this.fontSize=i,this.strokeStyle=n,this.fillStyle=a,this.lineWidth=r,this.rect=new h(new o,0,i),this.setRect()}setPosition(e){this.position.set(e),this.center&&this.position.set(e.x+this.rect.getWidth()/2,e.y+this.rect.getHeight()/2);let t=this.position.x,s=this.position.y;this.center&&(t-=this.rect.getWidth()/2,s-=this.fontSize/2),this.rect.setPosition(t,s)}setText(e){this.text=e,this.setRect()}getPosition(){return this.position}getRect(){return this.rect}render(){const e=p.getContext();""!=this.text&&this.visible&&(e.save(),e.textBaseline="top",this.center&&(e.textBaseline="middle",e.textAlign="center"),e.font=`${this.fontSize}px ${p.getTheme().fontFamily}`,e.strokeStyle=this.strokeStyle,e.fillStyle=this.fillStyle,e.lineWidth=this.lineWidth,e.strokeText(this.text,this.position.x,this.position.y),e.fillText(this.text,this.position.x,this.position.y),p.getDebug()&&(e.strokeStyle="red",this.center&&(e.fillStyle="red",e.beginPath(),e.arc(this.position.x,this.position.y,this.lineWidth,0,2*Math.PI),e.fill()),e.strokeRect(this.rect.getX(),this.rect.getY(),this.rect.getWidth(),this.rect.getHeight())),e.restore())}setRect(){const e=p.getContext();e.save(),e.font=`${this.fontSize}px ${p.getTheme().fontFamily}`;const t=e.measureText(this.text).width;e.restore();let s=this.position.x,i=this.position.y;this.center&&(s-=t/2,i-=this.fontSize/2),this.rect.setPosition(s,i),this.rect.setWidth(t)}}class H extends S{constructor(){super();const e=new w;e.entities.push(new D(T.a.t("maps.chooseMap"),new o(960,400),!0,60)),e.entities.push(new g("Logos",new h(new o(d.x,d.y),d.w,d.h),new h(new o(500,500),400,90))),e.entities.push(new g("Logos",new h(new o(m.x,m.y),m.w,m.h),new h(new o(1100,500),400,90))),e.entities.push(new g("Logos",new h(new o(x.x,x.y),x.w,x.h),new h(new o(500,620),400,90))),e.entities.push(new g("Logos",new h(new o(y.x,y.y),y.w,y.h),new h(new o(1100,620),400,90))),this.layers.push(e)}onEnter(){p.setOffset(0,0),p.setScale(1,1)}onExit(){}updateText(){this.layers[0].entities[0].setText(T.a.t("maps.chooseMap"))}update(){if(c.getMouseButtons().LEFT){const e=c.getMousePosition(),t=this.layers[0].entities;for(let s=1;s<t.length;s++){if(t[s].getRect().isPointInside(e)){switch(s){case 1:k.changeScene("MiraHQ");break;case 2:k.changeScene("Polus");break;case 3:k.changeScene("TheAirship");break;default:k.changeScene("TheSkeld")}break}}}}}class E extends l{constructor(e,t){super(!0,!0);const s=p.getPlayers().get(e);if(this.color=e,void 0===s)throw new Error(e+" has no image.");{this.image=s;const e=s.getSourceRect();this.position=new o(t.x-e.getWidth()/2,t.y-e.getHeight()/2)}}setPosition(e){this.position=e}getRect(){return this.image.getRect()}getColor(){return this.color}isPointInRect(e){return this.visible&&this.image.getRect().isPointInside(e)}render(){this.image.setPosition(this.position),this.image.render()}}var C=s(13),L=s(49);class W extends w{constructor(e,t){super(t),this.addInitialPlayers(e)}addPlayer(e,t){this.entities.push(new E(e,t))}clear(e){this.entities=[],this.addInitialPlayers(e)}addInitialPlayers(e){const t=L.a.getState();if(Object(C.b)(t)){const t=["black","blue","brown","cyan","green","lime","orange","pink","purple","red","white","yellow"];let s=0;for(const i of t){this.addPlayer(i,new o(0,0));const t=this.entities[this.entities.length-1].getRect();this.entities[this.entities.length-1].setPosition(new o(s,e-t.getHeight()-10)),s+=2*t.getWidth()}}}}var B=s(33),F=s(20);class G extends w{constructor(e=!1){super(e),this.center=new o,this.colors=["black","blue","brown","cyan","green","lime","orange","pink","purple","red","white","yellow"]}openMenu(){this.center.set(c.getMousePosition());const e=L.a.getState(),t=Object(F.c)(e),s=Object(n.h)(e);this.colors=["black","blue","brown","cyan","green","lime","orange","pink","purple","red","white","yellow"],this.colors=this.colors.filter(e=>t[e].section!==s),this.visible=!0}getCenter(){return this.center}pointInPolygon(e,t){const s=e.length;let i=0,n=0,a=e[0],o=e[0];for(let h=1;h<=s;h++)o=e[h%s],t.y>Math.min(a.y,o.y)&&t.y<=Math.max(a.y,o.y)&&t.x<=Math.max(a.x,o.x)&&a.y!==o.y&&(n=(t.y-a.y)*(o.x-a.x)/(o.y-a.y)+a.x,(a.x===o.x||t.x<=n)&&i++),a=o;return!(i%2==0)}getColorFromPosition(e){const t=2*Math.PI/this.colors.length;let s=0;for(const i of this.colors){const n=new o(this.center.x+40*Math.sin(s),this.center.y+40*Math.cos(s)),a=new o(this.center.x+100*Math.sin(s),this.center.y+100*Math.cos(s)),h=new o(this.center.x+100*Math.sin(s+t),this.center.y+100*Math.cos(s+t)),r=new o(this.center.x+40*Math.sin(s+t),this.center.y+40*Math.cos(s+t));if(this.pointInPolygon([n,a,h,r],e))return i;s+=t}return null}render(){if(this.visible){const e=p.getContext(),t=2*Math.PI/this.colors.length;let s=0;e.save(),e.lineWidth=1;for(const i of this.colors)e.fillStyle=B.a[i].base,e.beginPath(),e.moveTo(this.center.x+40*Math.sin(s),this.center.y+40*Math.cos(s)),e.lineTo(this.center.x+100*Math.sin(s),this.center.y+100*Math.cos(s)),e.lineTo(this.center.x+100*Math.sin(s+t),this.center.y+100*Math.cos(s+t)),e.lineTo(this.center.x+40*Math.sin(s+t),this.center.y+40*Math.cos(s+t)),e.closePath(),e.fill(),s+=t;e.restore()}}}class O extends S{constructor(e,t){super(),this.panning=!1,this.panningPosition=new o;const s=p.getImages(),i=new w;i.entities.push(new g(e,void 0,void 0,new o(t,t))),s.has(e+"Cameras")&&i.entities.push(new g(e+"Cameras",void 0,void 0,new o(t,t))),s.has(e+"Sensors")&&i.entities.push(new g(e+"Sensors",void 0,void 0,new o(t,t))),s.has(e+"Vents")&&i.entities.push(new g(e+"Vents",void 0,void 0,new o(t,t))),this.layers.push(i),this.offset=new o(0,0),this.scale=new o(1,1),this.hub=new w,this.hub.entities.push(new g("Logos",new h(new o(f,b),v,P),new h(new o(1900-3*v,20),3*v,3*P))),this.texts=new Map,this.menu=new G,this.players=new W(i.entities[0].getRect().getHeight());const n=p.getContext(),a=n.canvas.width,r=n.canvas.height,c=p.getImages().get(e);null!=c&&(this.scale.x=a/(c.width*t),this.scale.y=r/(c.height*t))}onEnter(){p.setOffset(this.offset.x,this.offset.y),p.setScale(this.scale.x,this.scale.y)}onExit(){this.offset.set(p.getOffset()),this.scale.set(p.getScale())}updateText(){this.texts.forEach((e,t)=>e.setText(T.a.t("maps."+t)))}update(e){const t=c.getMousePosition();if(this.menu.getVisible()){if(!c.getMouseButtons().RIGHT){const e=this.menu.getColorFromPosition(t);null!==e&&this.players.addPlayer(e,p.screenToWorld(this.menu.getCenter())),this.menu.setVisible(!1)}c.stopPropagation()}let s=!1;this.panning&&c.getMouseButtons().LEFT&&(p.getOffset().subtract(o.subtract(t,this.panningPosition)),this.panningPosition.set(t),c.stopPropagation(),s=!0),super.update(e),c.getMouseButtons().LEFT?this.hub.entities[0].getRect().isPointInside(t)?(k.changeScene("Menu"),c.stopPropagation()):this.panning||(this.panning=!0,this.panningPosition.set(t)):!s&&this.panning&&(this.panning=!1);const i=c.getWheel();if(i){const e=p.screenToWorld(t);i>0?(p.getScale().x*=.9,p.getScale().y*=.9):i<0&&(p.getScale().x*=1.1,p.getScale().y*=1.1);const s=p.screenToWorld(t);e.subtract(s),e.x*=p.getScale().x,e.y*=p.getScale().y,p.getOffset().add(e)}c.getMouseButtons().RIGHT&&this.menu.openMenu(),c.getDoubleClicked()&&this.players.clear(this.layers[0].entities[0].getRect().getHeight());const n=c.getKeys();(n.M||n.m)&&k.changeScene("Menu"),(n.C||n.c)&&this.players.clear(this.layers[0].entities[0].getRect().getHeight()),c.restoreState()}render(){super.render(),this.hub.render(),this.menu.render()}}class V extends O{constructor(){super("MiraHQ",2);const e=new w;this.texts.set("greenhouse",new D(T.a.t("maps.greenhouse"),new o(8e3,1900),!0,200,R,M,30)),this.texts.set("office",new D(T.a.t("maps.office"),new o(7200,3300),!0,200,R,M,30)),this.texts.set("admin",new D(T.a.t("maps.admin"),new o(8750,3300),!0,200,R,M,30)),this.texts.set("reactor",new D(T.a.t("maps.reactor"),new o(4e3,5200),!0,200,R,M,30)),this.texts.set("laboratory",new D(T.a.t("maps.laboratory"),new o(5800,5200),!0,200,R,M,30)),this.texts.set("decontamination",new D(T.a.t("maps.decontamination"),new o(4900,6e3),!0,200,R,M,30)),this.texts.set("launchpad",new D(T.a.t("maps.launchpad"),new o(2e3,7100),!0,200,R,M,30)),this.texts.set("lockerRoom",new D(T.a.t("maps.lockerRoom"),new o(5900,6800),!0,200,R,M,30)),this.texts.set("communications",new D(T.a.t("maps.communications"),new o(7300,7100),!0,200,R,M,30)),this.texts.set("medBay",new D(T.a.t("maps.medBay"),new o(7300,8e3),!0,200,R,M,30)),this.texts.set("storage",new D(T.a.t("maps.storage"),new o(8425,6650),!0,200,R,M,30)),this.texts.set("cafeteria",new D(T.a.t("maps.cafeteria"),new o(1e4,6650),!0,200,R,M,30)),this.texts.set("balcony",new D(T.a.t("maps.balcony"),new o(9550,8450),!0,200,R,M,30)),this.texts.forEach(t=>e.entities.push(t)),this.layers.push(e),this.layers.push(this.players)}}class A extends O{constructor(){super("Polus",4);const e=new w;this.texts.set("dropship",new D(T.a.t("maps.dropship"),new o(4600,1e3),!0,200,R,M,30)),this.texts.set("security",new D(T.a.t("maps.security"),new o(950,3700),!0,200,R,M,30)),this.texts.set("electrical",new D(T.a.t("maps.electrical"),new o(2600,3850),!0,200,R,M,30)),this.texts.set("storage",new D(T.a.t("maps.storage"),new o(5600,3800),!0,200,R,M,30)),this.texts.set("laboratory",new D(T.a.t("maps.laboratory"),new o(9400,2800),!0,200,R,M,30)),this.texts.set("o2",new D(T.a.t("maps.o2"),new o(800,5200),!0,200,R,M,30)),this.texts.set("communications",new D(T.a.t("maps.communications"),new o(3200,5e3),!0,200,R,M,30)),this.texts.set("office",new D(T.a.t("maps.office"),new o(5400,5300),!0,200,R,M,30)),this.texts.set("weapons",new D(T.a.t("maps.weapons"),new o(3400,6800),!0,200,R,M,30)),this.texts.set("admin",new D(T.a.t("maps.admin"),new o(6400,6600),!0,200,R,M,30)),this.texts.set("specimenRoom",new D(T.a.t("maps.specimenRoom"),new o(9800,6e3),!0,200,R,M,30)),this.texts.forEach(t=>e.entities.push(t)),this.layers.push(e),this.layers.push(this.players)}}class j extends O{constructor(){super("TheAirship",2);const e=new w;this.texts.set("meetingRoom",new D(T.a.t("maps.meetingRoom"),new o(7800,800),!0,200,R,M,30)),this.texts.set("vault",new D(T.a.t("maps.vault"),new o(3500,1200),!0,200,R,M,30)),this.texts.set("brig",new D(T.a.t("maps.brig"),new o(5300,2e3),!0,200,R,M,30)),this.texts.set("gapRoom",new D(T.a.t("maps.gapRoom"),new o(7e3,2e3),!0,200,R,M,30)),this.texts.set("records",new D(T.a.t("maps.records"),new o(9700,1600),!0,200,R,M,30)),this.texts.set("lounge",new D(T.a.t("maps.lounge"),new o(11400,2700),!0,200,R,M,30)),this.texts.set("cockpit",new D(T.a.t("maps.cockpit"),new o(1e3,3800),!0,200,R,M,30)),this.texts.set("communications",new D(T.a.t("maps.communications"),new o(2600,3600),!0,200,R,M,30)),this.texts.set("engineRoom",new D(T.a.t("maps.engineRoom"),new o(5e3,4100),!0,200,R,M,30)),this.texts.set("mainHall",new D(T.a.t("maps.mainHall"),new o(7800,3900),!0,200,R,M,30)),this.texts.set("showers",new D(T.a.t("maps.showers"),new o(1e4,3800),!0,200,R,M,30)),this.texts.set("cargoBay",new D(T.a.t("maps.cargoBay"),new o(13e3,4100),!0,200,R,M,30)),this.texts.set("armory",new D(T.a.t("maps.armory"),new o(2800,5200),!0,200,R,M,30)),this.texts.set("viewingDeck",new D(T.a.t("maps.viewingDeck"),new o(2600,6600),!0,200,R,M,30)),this.texts.set("kitchen",new D(T.a.t("maps.kitchen"),new o(4400,6300),!0,200,R,M,30)),this.texts.set("security",new D(T.a.t("maps.security"),new o(6900,6600),!0,200,R,M,30)),this.texts.set("electrical",new D(T.a.t("maps.electrical"),new o(8900,5800),!0,200,R,M,30)),this.texts.set("medical",new D(T.a.t("maps.medical"),new o(10600,6e3),!0,200,R,M,30)),this.texts.forEach(t=>e.entities.push(t)),this.layers.push(e),this.layers.push(this.players)}}class Q extends O{constructor(){super("TheSkeld",1.5);const e=new w;this.texts.set("upperEngine",new D(T.a.t("maps.upperEngine"),new o(1800,1400),!0,200,R,M,30)),this.texts.set("cafeteria",new D(T.a.t("maps.cafeteria"),new o(4800,1400),!0,200,R,M,30)),this.texts.set("weapons",new D(T.a.t("maps.weapons"),new o(6600,1100),!0,200,R,M,30)),this.texts.set("reactor",new D(T.a.t("maps.reactor"),new o(1200,2200),!0,200,R,M,30)),this.texts.set("security",new D(T.a.t("maps.security"),new o(2600,2200),!0,200,R,M,30)),this.texts.set("medBay",new D(T.a.t("maps.medBay"),new o(3400,1800),!0,200,R,M,30)),this.texts.set("o2",new D(T.a.t("maps.o2"),new o(6200,1900),!0,200,R,M,30)),this.texts.set("navigation",new D(T.a.t("maps.navigation"),new o(7600,2100),!0,200,R,M,30)),this.texts.set("lowerEngine",new D(T.a.t("maps.lowerEngine"),new o(1800,3e3),!0,200,R,M,30)),this.texts.set("electrical",new D(T.a.t("maps.electrical"),new o(3600,2800),!0,200,R,M,30)),this.texts.set("storage",new D(T.a.t("maps.storage"),new o(4700,3300),!0,200,R,M,30)),this.texts.set("admin",new D(T.a.t("maps.admin"),new o(5800,3e3),!0,200,R,M,30)),this.texts.set("communications",new D(T.a.t("maps.communications"),new o(5800,4e3),!0,200,R,M,30)),this.texts.set("shields",new D(T.a.t("maps.shields"),new o(6400,3500),!0,200,R,M,30)),this.texts.forEach(t=>e.entities.push(t)),this.layers.push(e),this.layers.push(this.players)}}class K extends S{constructor(){super(),p.setImages(["MiraHQ","assets/images/MiraHQ.png","MiraHQSensors","assets/images/MiraHQSensors.png","MiraHQVents","assets/images/MiraHQVents.png","Polus","assets/images/Polus.png","PolusCameras","assets/images/PolusCameras.png","PolusVents","assets/images/PolusVents.png","TheAirship","assets/images/TheAirship.png","TheAirshipCameras","assets/images/TheAirshipCameras.png","TheAirshipVents","assets/images/TheAirshipVents.png","TheSkeld","assets/images/TheSkeld.png","TheSkeldCameras","assets/images/TheSkeldCameras.png","TheSkeldVents","assets/images/TheSkeldVents.png","Players","assets/images/players.png","Logos","assets/images/logos.png"]);const e=p.getContext(),t=new w;t.entities.push(new D(T.a.t("maps.loading"),new o(e.canvas.width/2,e.canvas.height/2),!0,100)),this.layers.push(t)}onEnter(){}onExit(){}updateText(){this.layers[0].entities[0].setText(T.a.t("maps.loading"))}update(){p.isLoaded()&&(k.addScene("Menu",new H),k.addScene("MiraHQ",new V),k.addScene("Polus",new A),k.addScene("TheAirship",new j),k.addScene("TheSkeld",new Q),k.changeScene("Menu"))}}class z{constructor(){this.animFrame=0}static GetInstance(){return z.instance||(z.instance=new z),z.instance}getAnimFrame(){return this.animFrame}init(){const e=p.getContext(),t=p.getTheme();if(void 0===e&&null===e||void 0===t&&null===t)throw new Error("Context and theme must be set before initializing the animation.");k.addScene("Loading",new K),k.changeScene("Loading"),this.loop(0)}update(e){k.update(e)}render(){k.render()}loop(e){Y.update(e),Y.render(),Y.animFrame=window.requestAnimationFrame(Y.loop)}}const Y=z.GetInstance();var U={Main:Y,Config:p,InputHandler:c,SceneManager:k},X=s(0),$=s.n(X),q=s(31),J=s(16),N=Object(J.d)({Maps:{padding:"1rem",flexGrow:1,maxHeight:"calc((var(--vh, 1vh) * 100) - 2.2rem)",fallbacks:{maxHeight:"calc(100vh - 2.2rem)"}},MapsCanvas:{width:"100%",height:"100%",overscrollBehavior:"none",touchAction:"none","&:focus":{outline:"none"}}}),Z=s(24);t.default=function(){const e=N(),t=Object(Z.c)(),s=Object(q.c)(F.c),i=Object(q.c)(n.d),a=Object(q.c)(n.h),o=Object(q.c)(C.d),h=$.a.useRef(null);return $.a.useEffect(()=>{if(null!==h.current){const e=h.current.getContext("2d");if(null!==e)return U.Config.setDebug(!0),U.Config.setContext(e),U.Config.setTheme(t),U.Main.init(),()=>{cancelAnimationFrame(U.Main.getAnimFrame())}}},[]),$.a.useEffect(()=>{U.Config.setTheme(t)},[t]),$.a.useEffect(()=>{U.Config.updatePlayers(s,i,a,o)},[s,i,a,o]),$.a.createElement("div",{className:e.Maps},$.a.createElement("canvas",{tabIndex:1,ref:h,width:1920,height:1080,className:e.MapsCanvas,onContextMenu:e=>e.preventDefault(),onPointerMove:e=>U.InputHandler.onPointerMove(e),onPointerDown:e=>U.InputHandler.onPointerDown(e),onPointerUp:e=>U.InputHandler.onPointerUp(e),onPointerEnter:e=>U.InputHandler.onPointerEnter(e),onPointerLeave:e=>U.InputHandler.onPointerLeave(e),onDoubleClick:e=>U.InputHandler.onDoubleClick(e),onWheel:e=>U.InputHandler.onWheel(e),onKeyDown:e=>U.InputHandler.onKeyDown(e),onKeyUp:e=>U.InputHandler.onKeyUp(e)},"This section is not supported on your browser."))}}}]);